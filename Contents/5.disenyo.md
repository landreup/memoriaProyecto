# Diseño del software # {#disenyo}

Este capítulo se divide en tres secciones. La primera de ellas consiste en el
análisis de los requisitos que el sistema debe cumplir. En la segunda se describe
el diseño que tendrá el sistema, con sus elementos hardware y software y las
relaciones existentes entre ellos. Finalmente, en la tercera sección, se describirá
la arquitectura del sistema desde el punto de vista del usuario final de la
aplicación.

## Diseño de la arquitectura del sistema ## {#arquitecturaSistema}

En esta sección se van a describir qué elementos hardware y software
intervienen en el desarrollo y posterior puesta en marcha de la aplicación,
así como la manera en que se comunican y conectan. Estos elementos
deben satisfacer los requisitos software y hardware previamente
especificados. A modo de esquema, en la figura ###### se muestra la
arquitectura que tiene el sistema, con los componentes implicados. Los
componentes hardware necesarios son: un servidor, dispositivos con
navegador web que ejercerán como clientes y una red para comunicar a
todos.

Los componentes software requeridos son: una base de datos gestionada
por PostgreSQL, servidor web Apache con mod_proxy y mod_wsgi,
servidor web Lighttpd, Python y Django respecto a la parte del servidor y
respecto al cliente un navegador web. A continuación se describe cada
uno de estos componentes.

En primer lugar, se debe tener una base de datos y un lugar donde
almacenarla. El servidor será el encargado de albergar la base de datos.
Para ello se dispone de un servidor PostgreSQL configurado y
ejecutándose en el sistema. Este servidor se encargará de ejecutar a las
consultas que realice la herramienta y en caso de que incluyan
modificación de información modificarla para que se refleje en las
posteriores consultas.

En segundo lugar se dispondrá de un servidor web Apache escuchando
en el puerto 80 en la parte del servidor. Este servidor se encargará de
ejecutar la aplicación mediante la creación de distintas ejecuciones de la
aplicación mediante el módulo WSGI. Para la ejecución mediante el
módulo WSGI será necesario tener instalados Python y Django. Por otra
parte, este servidor se encargará también de servir los ficheros estáticos
delegando la acción el servidor Lighttpd.

En tercer lugar se dispondrá del servidor Lighttpd escuchando en el
puerto 8000 en la parte del servidor. Este servidor se encargará de servir
todos los archivos estáticos de la aplicación. Se ha elegido está opción
para eliminar esta carga de la ejecución de la aplicación.

En cuarto lugar para acceder a la aplicación desde los clientes se
necesitará un navegador web que permita ejecutar Javascript.

## Diseño del modelo de datos ## {#modeloDatos}

A partir de los requisitos de datos, en esta sección se definirán las estructuras
de datos que participarán en la aplicación. En la siguiente figura se puede
observar los objetos que habrán en el sistema y sus relaciones.

A continuación se definirán los campos que contendrán estos objetos.

* **Alumno**: Este objeto tendrá definidos los campos `nombre`, `apellidos`, `usuarioUJI`.
Estos campos serán todos cadenas que se almacenarán en la base de datos. 

* **Curso**: Este objeto tendrá definidos los campos `curso`, `fechaTope`, `esActual`. Los
campos `curso` y `fechaTope` estarán almacenados en la base de datos mientras que el 
campo esActual será un campo calculado del objeto. 

* **SistemaEvaluación**: Este objeto tendrá definidos los campos `curso` y `estado`. El 
campo `curso` será una relación al objeto *Curso* y el campo `estado` será una cadena.
Además ambos campos estarán almacenados en la base de datos.

* **Hito**: Este objeto tendrá definidos los campos `nombre`, `sistemaEvaluacion`, `plazo`
y `orden`. Todos los campos estarán almacenados en la base de datos. Además el campo 
`plazo` indicará que duración en semanas tendrá el hito, el campo `orden` indicará la
situación del hito en el sistema de evaluación y el campo `nombre` será una cadena. El
campo `sistemaEvaluación` será una relación al objeto *SistemaEvaluación*.

* **Evaluación**: Este objeto tendrá definidos los campos `nombre`, `hito`, `porcentaje` y 
`evaluador`. Todos los campos estarán almacenados en la base de datos. El campo `nombre`
será de tipo cadena, el campo `porcentaje` será un número real y el campo `evaluador` estará
compuesto por un conjunto de caracteres que indicarán el rol que evalúa la evaluación. Además
el campo `hito` será una relación al objeto *Hito*.

* **Pregunta**: Este objeto tendrá definidos los campos `evaluacion`, `pregunta` y 
`tipoRespuesta`. Todos los campos estarán almacenados en la base de datos. EL campo `pregunta`
será una cadena y el campo `tipoRespues` será un caracter que indicará el tipo de respuesta
de la pregunta. Además el campo `evaluacion` será una relación al objeto *Evaluación*.

* **Proyecto**: Este objeto tendrá definidos los campos `alumno`, `tutor`, `supervisor`, `email`,
`curso`, `empresa`, `telefono`, `titulo`, `inicio`, `dedicacionSemanal`, `otrosDatos` y `estado`.
Todos los campos estarán almacenados en la base de datos. 
Los campos `supervisor`, `empresa`, `telefono` y `titulo` serán cadenas que representarán el 
nombre del supervisor, el nombre de la empresa, el número de telefono de la empresa y el título 
del proyecto. El campo `email` será un campo de tipo email y representará el email del supervisor
de la empresa, el campo `otrosDatos` será un campo de tipo texto y permitirá almacenar toda la 
otra información que los profesores consideren y el campo `estado` que será un carácter y representará
el estado del proyecto. Junto con estos los campos `inicio` y `dedicacionSemanal` que serán de tipo
fecha y número real y representarán la fecha de inicio del proyecto y la dedicación semanal que el 
alumno dedicará al proyecto. Además de estos campos también estarán definidos los campos `alumno`,
`tutor` y `curso` que serán relaciones a los objetos *Alumno*, *Usuario* y *Curso*.

* **MiembrosTribunal**: Este objeto tendrá definidos los campos `proyecto`, `idMiembro` y `miembro`. 
Todos los campos estarán almacenados en la base de datos. 
El campo `idMiembro` será un número entero que representará el identificador del miembro en el
tribunal. Además los campos `proyecto` y `miembro` serán relaciones a los objetos *Proyecto* y
*Usuario*.

* **FechaEstimada**: Este objeto tendrá definidos los campos `proyecto`, `hito` y `fecha`.
Todos los campos estarán almacenados en la base de datos. El campo
`fecha` será de tipo fecha y representará la fecha estimada de un hito para el proyecto. Además los
campos `proyecto` y `hito` serán relaciones a los objetos *Proyecto* y *Hito*.

* **EstadoProyectoEnCurso**: Este objeto tendrá definidos los campos `proyecto` y `hito`.
Todos los campos estarán almacenados en la base de datos. Este
objeto representará el estado del proyecto en el sistema de evaluación. Además los campos
`proyecto` y `hito` serán relaciones a los objetos *Proyecto* y *Hito*.

* **ProyectoParaRevisiónEnCurso**: Este objeto tendrá definidos los campos `proyecto` y `campos`.
Todos los campos estarán almacenados en la base de datos. El
campo `campos` será un campo de texto y contendrá un listado con los campos que se necesitán completar
del proyecto. Además el campo `proyecto` será una relación al objeto *Proyecto*.

* **Usuario**: Este objeto tendrá definidos los campos `nombre`, `apellidos`, `usuarioUJI` y `rol`.
Todos los campos estarán almacenados en la base de datos. Los campos `nombre`, `apellidos` y 
`usuarioUJI` serán cadenas y el campo `rol` será un carácter e indicará el rol del usuario.

* **Formulario**: Este objecto tendrá definidos los campos `proyecto`, `hito`, `rol`, `idMiembro`, 
`codigo` y `fechaValorado`. Todos los campos estarán almacenados en la base de datos. El campo `rol`
será un carácter e indicará el evaluador del formulario, el campo `idMiembro` sólo se usará para
formularios de tribunal e indicará el miembro del tribunal que valora el formulario. El campo 
`codigo` será un campo de tipo cadena y almacenará la cadena aleatória para acceder al formulario y
el campo `fechaValorado` sera de tipo fecha y almacenará la fecha en la que ha sido valorado el
formulario. Además los campos `proyecto` y `hito` serán relaciones a los objetos *Proyecto* y *Hito*.

* **EvaluacionesFormulario**: Este objeto tendrá definidos los campos `evaluacion`, `formulario` y 
`valoracionEvaluacion`. Todos los campos estarán almacenados en la base de datos. Este objeto 
almacenará las evaluaciones que contiene un formulario. El campo `valoracionEvaluacion` sólo 
almacenará datos para los proyectos trasladados de un curso a otro y almacenará la valoración del 
coordinador para la evaluación del formulario. Además los campos `evaluacion` y `formulario` serán
relaciones a los objetos *Evaluacion* y *Formulario*.

* **Valoración**: Este objeto tendrá definidos los campos `pregunta`, `respuesta` y `evaluacionFormulario`.
Todos los campos estarán almacenados en la base de datos. El campo respuesta será un número entero y
almacenará la valoración de una pregunta del formulario. Además los campos `pregunta` y 
`evaluacionFormulario` serán relaciones a los objetos *Pregunta* y *EvaluacionesFormularios*.

## Diseño de la arquitectura software del sistema ## {#arquitecturaSoftware}

En esta sección se definirá la arquitectura software del sistema a partir
del modelo de datos diseñado y los requisitos funcionales, es decir, la
estructura de módulos que se crearán para gestionar los datos y presentarlos
en las interfaces. El sistema estará formado por siete módulos diferentes
relacionados. Estos módulos son 
el *módulo de gestión de Alumnos*,
el *módulo de gestión de la Aplicación*, 
el *módulo de gestión de los Cursos Académidos*, 
el *módulo de gestión del Sistema de Evaluación*,
el *módulo de gestión del Proyecto*, 
el *módulo de gestión de Usuarios* y
el *módulo de gestión de las Valoraciones*. Las funciones de cada uno de éstos
módulos se definirán en los siguientes párrafos.

El *módulo de gestión de Alumnos* se encargará de todas las funciones relativas
a los alumnos. Esto comprenderá almacenar la información de los alumnos y gestionar
los formularios de creacion de alumnos y de edición de alumnos.

El *módulo de gestión de la Aplicación* se encargará de todas las funciones relativas
a aspectos de la aplicación. Estas acciones comprenderán la gestión de la página
principal, la instalación de la aplicación y los envíos de correos.

El *módulo de gestión de los Cursos Académicos* se encargará de todas las funciones
referenes a la gestión de los cursos. Estas funciones incluirán almacenar la 
información de los cursos, la generación de nuevos cursos, la edición de las fechas
tope de los cursos y averiguar que curso hay seleccionado en la aplicación.

El *módulo de gestión del Sistema de Evaluación* se encargará de todas las funciones
referentes a la gestión del sistema de evaluación. Esto comprenderá almacenar el 
sistema de evaluación y gestionar toda su información. Además también deberá permitir
copiar el sistema de evaluación del curso anterior al actual.

El *módulo de gestion del Proyecto* se encargará de todas las funciones relacionadas con
la gestión de los proyectos. Estas funciones incluirán el almacenaje de toda la 
información relativa de los proyectos, gestión de los formularios para la información de
los proyectos y gestión del cambio de estados de los proyectos.

El *módulo de gestión de Usuarios* se encargará de todas las funciones relacionas con
la gestión de la información de los profesores. Estas funciones serán almacenar la 
información de los profesores, gestionar la adición, edición y consulta. Además deberá
gestionar también la autenticación de estos en la aplicación.

El *módulo de gestión de las Valoraciones* se encargará de todas funciones relacionadas
con la gestión de las valoraciones y los formularios. Estas funciones serán la creación
de formularios para las evaluaciones del sistema de evaluación, controlar el acceso a 
estos formularios y permitir la consulta de las valoraciones de los formularios.
  
## Diseño de la interfaz ## {#interfaz}

En esta sección se describirá la arquitectura del sistema desde el punto de
vista de los usuarios. A la aplicación podrán conectarse diferentes tipos
de usuarios, estos son, profesores, coordinadores, supervisores y
alumnos. Para cada tipo de usuario que se pueda conectar a la aplicación
ésta tendrá unas características diferentes. Por tanto en las siguientes
secciones se va a detallar qué características tendrá la aplicación para los
diferentes tipos de usuarios. En primer lugar se realizará una explicación
de cómo están organizadas las pantallas de la aplicación para cada tipo
de usuario. En segundo lugar, se procederá a describir todas aquellas
características comunes a la mayoría de las pantallas del sistema. Y en
tercer lugar, se describirá el diseño y aspecto final que tendrá cada una de
las pantallas de las que dispondrá la aplicación.

### Organización de las pantallas ### {#organizacion}

A la aplicación se podrán acceder diferentes tipos de usuarios. En la
diferentes figuras quedará reflejado que la organización de las pantallas
se corresponde con un diagrama en árbol. Para los profesores y para los
estudiantes, en la raíz se encuentra la pantalla de inicio al servidor, desde
la cuál dependiendo el tipo de usuario se le redireccionará a la ventana
que le corresponda o se le informará que no tiene acceso a la aplicación si
no existe en ésta. Para los otros tipos de usuarios, estos deberán acceder
mediante un enlace que será enviado por correo electrónico. A partir de
este punto las características serán distintas dependiendo del tipo de
usuario. Las diferentes opciones se explican en los siguientes puntos.

Los profesores tendrán acceso a consultar los proyectos de los cuáles sean
tutor junto con sus valoraciones. Además en el caso que sea tutor podrá
añadir y modificar los proyectos. Por otra parte, también podrá completar
las evaluaciones de las que sea responsable mediante el enlace que le será
enviado al correo o desde la pantalla de valoraciones del proyecto.

Para los coordinadores, se incluirán las acciones definidas para los
profesores y además podrán gestionar la aplicación.
Esto significa que podrán ver los proyectos de cualquier profesor junto
con realizar acciones de administración de la aplicación. Estas acciones
serán la de gestionar los profesores, gestionar los cursos, gestionar los
hitos y definir los tribunales de los proyectos.

Por otra parte los estudiantes podrán acceder a la aplicación para
consultar el estado de su valoración. Además podrán acceder a valorar las
evaluaciones sobre las que sean responsables mediante la ventana de las
valoraciones o mediante el enlace que se les enviará por correo electrónico.

Finalmente, los miembros de un tribunal junto con los supervisores
podrán acceder a valorar las evaluaciones de las que sean responsables
mediante los enlaces que les serán enviados mediante correo electrónico.


### Características comunes ### {#caracteristicas}

En este punto se definirán qué características son comunes en la mayoría
de las pantallas. Estas características son las que se enumeran y describen
a continuación:

* **Estética del documento**: Todas las pantallas de la aplicación tienen la
misma estética. Están diseñadas a partir del diseño de la página del E-
UJIER cumpliendo el requisito no funcional NFRQ-01. En la figura ###### 
se observa, a modo de esquema, la forma en que se
estructurarán los elementos de las pantallas de acuerdo a esta estética.

* **Logotipo de la universidad**: Este logotipo de la universidad aparecerá
en todas las pantallas, en la misma posición y en las mismas
dimensiones.

* **Cabecera**: A la derecha del logotipo, se mostrará el título de la
aplicación junto con el nombre de la universidad. Su utilidad es la de
indicar la herramienta en que se encuentra el usuario y para que el
usuario no se confunda con cualquier otra herramienta de la
universidad.

* **Botón de desconexión**: Este botón servirá para desautenticarse del
sistema de autenticación de la universidad. Este botón se encontrará en
la esquina superior derecha.

* **Menú de navegación**: Este menú aparecerá a los usuarios que tengan
pantallas por las que navegar. En este menú dependiendo del tipo de
usuario aparecerán unas opciones u otras o ninguna. Además estará
situado en la esquina derecha de la aplicación.

* **Cuerpo**: Esta parte se encuentra en la parte derecha y centro de la
ventana y contiene toda la información de la aplicación para esa
ventana. 

El cuerpo además está estructurado de la siguiente forma:

* *Ruta*: Se encuentra en la parte superior izquierda e indica en qué
ruta de la aplicación nos encontramos.

* *Curso*: Se sitúa en la parte superior izquierda. Para las ventanas que
se pueda seleccionar el curso se muestra este elemento junto con la
fecha tope del curso si se ha definido.

* *Titulo de la ventana*: Se encuentra debajo de la ruta y muestra el
título de la página.

* *Menú de la ventana*: Se sitúa debajo del selector de curso y muestra
las opciones que se pueden realizar en la ventana en el caso que las
haya.

* *Cuerpo de la ventana*: Se encuentra en el resto de la ventana y sigue
diferentes estructuras para cada caso.

### Pantallas de la aplicación ### {#pantallas}

aaaa
